<mujoco model="pincherx100">
    <compiler angle="radian" coordinate="local" meshdir="meshes" autolimits="true"/>

    <size nstack="300000" nuser_geom="1"/>
    <option gravity="0 0 -9.81"/>

    <visual>
        <global offwidth="1280" offheight="720"/>
        <map znear="0.001" zfar="25.0"/>
        <rgba haze=".3 .3 .3 1"/>
    </visual>

    <asset>
        <mesh name="base_mesh" file="px100_1_base.stl" scale="0.001 0.001 0.001" />
        <mesh name="shoulder_mesh" file="px100_2_shoulder.stl" scale="0.001 0.001 0.001" />
        <mesh name="upper_arm_mesh" file="px100_3_upper_arm.stl" scale="0.001 0.001 0.001" />
        <mesh name="forearm_mesh" file="px100_4_forearm.stl" scale="0.001 0.001 0.001" />
        <mesh name="gripper_mesh" file="px100_5_gripper.stl" scale="0.001 0.001 0.001" />
        <mesh name="gripper_bar_mesh" file="px100_7_gripper_bar.stl" scale="0.001 0.001 0.001" />
        <mesh name="gripper_finger_mesh" file="px100_8_gripper_finger.stl" scale="0.001 0.001 0.001" />
        <mesh name="oakd_mesh" file="DM9098Pro_enclosure_reduced.stl" scale="0.001 0.001 0.001" />
        <texture builtin="gradient" height="100" name="texplane" rgb1="0.08 0.08 0.18" rgb2="0 0 0" type="2d" width="100"/>
        <material name="grayfloor" reflectance="0.5" shininess="0.5" specular="1" texture="texplane"/>
    </asset>

    <worldbody>
    <light cutoff="100" diffuse="1 1 1" dir="-0 0 -1.3" directional="true" exponent="1" pos="0 0 1.3" specular=".1 .1 .1"/>
    <geom conaffinity="1" condim="3" material="grayfloor" name="floor" pos="0 0 0" rgba="0.8 0.9 0.8 1" size="40 40 40" type="plane"/>
        <body name="base" pos="0 0 0">
            <site name="global" pos="0 0 0"/>
            <geom type="mesh" mesh="base_mesh"/>
            <body name="waist" pos="0 0 0.053">
                <joint name="waist" type="hinge" axis="0 0 1" pos="0 0 0" range="-3.14 3.14" damping="0.1"/>
                <geom type="mesh" mesh="shoulder_mesh" mass="0.005"/>
                <body name="shoulder" pos="0 0 0.04225">
                    <joint name="shoulder" type="hinge" axis="1 0 0" range="-1.937 1.867" damping="0.1"/>   
                    <geom type="mesh" mesh="upper_arm_mesh" mass="0.005"/>
                    <body name="forearm" pos="0 -0.035 0.1">
                        <joint name="elbow" type="hinge" axis="1 0 0" pos="0 0 0" range="-2.11 1.605" damping="0.1"/>
                        <geom type="mesh" mesh="forearm_mesh" mass="0.005"/>      
                        <body name="gripper" pos="0 -0.1 0">
                            <joint name="wrist" type="hinge" axis="1 0 0" pos="0 0 0" range="-1.745 2.146" damping="0.1"/>
                            <geom type="mesh" mesh="gripper_mesh" mass="0.005"/>
                            <body name="gripper_bar" pos="0 0 0">
                                <geom type="mesh" mesh="gripper_bar_mesh" mass="0.005"/>
                                <body name="left_finger" pos="0.017 -0.086 0" axisangle="0 0 1 1.57">
                                    <joint name="left_finger" type="slide" axis="0 1 0" pos="0 0 0" range="-0.022 0" limited="true" damping="20"/>
                                    <geom type="mesh" mesh="gripper_finger_mesh" mass="0.005"/>
                                </body>
                                <body name="right_finger" pos="-0.017 -0.086 0" axisangle="0.71 0.71 0 3.14">
                                    <joint name="right_finger" type="slide" axis="0 1 0" pos="0 0 0" range="-0.022 0" limited="true" damping="20"/>
                                    <geom type="mesh" mesh="gripper_finger_mesh" mass="0.005"/>
                                </body>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
            <body name="cam" pos="-0.18 0.3 0.1" axisangle="1 0 0 2.1">
                <geom type="mesh" mesh="oakd_mesh"/>
                <camera name="cam" mode="fixed" fovy="45" pos="0.18 0.14 0.04" axisangle="0 1 0 3.14"/>
            </body>
        </body>
    </worldbody>

    <tendon>
        <fixed name="gripper_fingers">
            <joint joint="left_finger" coef="1"/>
            <joint joint="right_finger" coef="1"/>
        </fixed>
    </tendon>

    <actuator>
        <position name="waist" joint="waist" ctrlrange= "-3.14 3.14"/>
        <position name="shoulder" joint="shoulder" ctrlrange= "-1.937 1.867" ctrllimited="true"/>
        <position name="elbow" joint="elbow" ctrlrange= "-2.11 1.605" ctrllimited="true"/>
        <position name="wrist" joint="wrist" ctrlrange= "-1.745 2.146" ctrllimited="true"/>
        <position name="gripper" tendon="gripper_fingers" ctrlrange="-1 1"/>
    </actuator>

    <sensor>
        <!-- <camprojection camera="cam" site="global"/> -->
        <jointpos name="waist" joint="waist"/>
        <jointpos name="shoulder" joint="shoulder"/>
        <jointpos name="elbow" joint="elbow"/>
        <jointpos name="wrist" joint="wrist"/>
        <actuatorpos name="gripper" actuator="gripper"/>
    </sensor>
</mujoco>
